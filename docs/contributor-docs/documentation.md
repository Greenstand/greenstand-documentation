# Documentation

## Legacy

The document is currently hosted on Gitbook.

### Issues
- Access to the documentation requires the user to create an account on Gitbook, which is inconvenient.
- Authorization issues where the user is not able to view the documentation.
- Inability to suggest changes, create PRs

## Github Pages

The new documentation will be hosted using Github Pages, which uses Jekyll to serve the pages. The documentation can be written in HTML and more conveniently in Markdown. Note however that Github processes markdown slightly differently from Jekyll.

## Just the Docs

An easy to use Jekyll theme suited for creating documentation. A new repo with this theme can be generated by using [this](https://github.com/just-the-docs/just-the-docs-template/generate), or if using an existing repo, the template files can simply be copied in.

> Source: [^fn1]

## How it works

A repository `greenstand.github.io` is created for the organization. This is considered the "home" documentation. (TODO what goes here?) It can be accessed at `https://greenstand.github.io/`

For the microservices documentation, they can be maintained in the `docs/` of each repository. The template files of `just-the-docs-template` need to be copied into the repo [^fn1].
Suppose the name of the microservcice repo is `treetracker-query-api`. The deployed site can then be accessed at `https://greenstand.github.io/treetracker-query-api/`.


For every repository where Github Pages needs to be deployed, go to the repository page,

`Settings` > `Code and automation` > `Pages` > `Build and deployment` > `Source` > Choose `Github Actions`

Just The Docs template provides `pages.yml` workflow in `.github/workflows` which Github Actions uses to deploy the Jekyll site.

Github should build and deploy the website after every pushed commit. The changes may not be immediately reflected, and can take upto 10 minutes, according to the Github Pages documentation.

### Custom domain

Instead of `greenstand.github.io`, we can use `docs.greenstand.org`, where some of the Gitbook documentation is hosted.
(TODO how exactly?)

## Installation
The documentation can be viewed locally by serving the Jekyll site on `localhost`.

- Clone the documentation repository on your local machine.
- Install Bundler and Jekyll if they are not installed on your machine.
  - <https://jekyllrb.com/docs/installation/>
- Run `bundle install` in the working directory of the repo (where the `Gemfile` is).
- Run `bundle exec jekyll serve` to deploy the site. The default URL is `http://localhost:4000`.

{: .note }
It is recommended to install [rvm](https://rvm.io/) to manage and use different Ruby versions.

## References

[^fn1]: <https://github.com/just-the-docs/just-the-docs-template/blob/main/README.md#hosting-your-docs-from-an-existing-project-repo>




